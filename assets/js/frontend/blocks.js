(()=>{"use strict";var e={20:(e,t,a)=>{var n=a(609),s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,c=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function i(e,t,a){var n,r={},i=null,p=null;for(n in void 0!==a&&(i=""+a),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(p=t.ref),t)o.call(t,n)&&!l.hasOwnProperty(n)&&(r[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===r[n]&&(r[n]=t[n]);return{$$typeof:s,type:e,key:i,ref:p,props:r,_owner:c.current}}t.Fragment=r,t.jsx=i,t.jsxs=i},848:(e,t,a)=>{e.exports=a(20)},609:e=>{e.exports=window.React}},t={};function a(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,a),r.exports}const n=window.wp.i18n,s=window.wc.wcBlocksRegistry,r=window.wp.htmlEntities,o=window.wc.wcSettings;var c=a(609),l=a(848);const i=(0,o.getSetting)("paymentMethodData",{}).worldnetpayments,p=(0,n.__)("Worldnet Payments","woocommerce-gateway-worldnetpayments"),u=(0,r.decodeEntities)(i.title)||p,d=e=>{const{eventRegistration:t,emitResponse:a}=e,{onPaymentSetup:n}=t,[s,o]=(0,c.useState)({value:"",active:!1}),[p,u]=(0,c.useState)({value:"",active:!1}),[d,m]=(0,c.useState)({value:"",active:!1}),[v,y]=(0,c.useState)({value:"",active:!1}),[w,x]=(0,c.useState)(""),[h,b]=(0,c.useState)(null),[S,g]=(0,c.useState)(!1);(0,c.useEffect)((()=>{const e=n((async()=>({type:a.responseTypes.SUCCESS,meta:{paymentMethodData:{"card-name":s.value,"card-number":h||p.value,"card-expiry":d.value.replace("/",""),cvc:v.value,"card-type":w,"csrf-token":i.csrfToken,"wc-blocks-worldnetpayments-new-payment-method":S}}})));return()=>{e()}}),[a.responseTypes.ERROR,a.responseTypes.SUCCESS,n,s.value,p.value,d.value,v.value,w,h,S]);return(0,l.jsxs)(l.Fragment,{children:[(0,r.decodeEntities)(i.description||""),(0,l.jsxs)("div",{className:"wc-payment-method-fields-worldnetpayments",children:[(0,l.jsxs)("div",{className:"wc-block-components-text-input "+(s.active||""!==s.value?"is-active":""),children:[(0,l.jsx)("input",{type:"text",name:"worldnetpayments-card-name",id:"worldnetpayments-card-name",onFocus:()=>o({...s,active:!0}),onBlur:()=>o({...s,active:!1}),onChange:e=>o({...s,value:e.target.value})}),(0,l.jsx)("label",{htmlFor:"worldnetpayments-card-name",children:"Card holder"})]}),(0,l.jsxs)("div",{className:"wc-block-components-text-input "+(p.active||""!==p.value?"is-active":""),children:[(0,l.jsx)("input",{type:"text",name:"worldnetpayments-card-number",id:"worldnetpayments-card-number",onFocus:()=>u({...p,active:!0}),onBlur:()=>u({...p,active:!1}),onChange:e=>u({...p,value:e.target.value}),value:(f=p.value,f.replace(/[^0-9]/g,"")),maxLength:16}),(0,l.jsx)("label",{htmlFor:"worldnetpayments-card-number",children:"Card number"})]}),(0,l.jsxs)("div",{className:"wc-block-components-text-input "+(d.active||""!==d.value?"is-active":""),children:[(0,l.jsx)("input",{type:"text",name:"worldnetpayments-card-expiry",id:"worldnetpayments-card-expiry",onFocus:()=>m({...d,active:!0}),onBlur:()=>m({...d,active:!1}),onChange:e=>m({...d,value:e.target.value}),value:function(e){let t=e.replace(/[^0-9]/g,"");return t.length>2?(0===parseInt(t.substring(0,2))?t="01"+t.substring(2):parseInt(t.substring(0,2))>12&&(t="12"+t.substring(2)),t.substring(0,2)+"/"+t.substring(2)):t}(d.value),maxLength:5}),(0,l.jsx)("label",{htmlFor:"worldnetpayments-card-expiry",children:"Expiry (MM/YY)"})]}),(0,l.jsxs)("div",{className:"wc-block-components-text-input "+(v.active||""!==v.value?"is-active":""),children:[(0,l.jsx)("input",{type:"text",name:"worldnetpayments-card-cvc",id:"worldnetpayments-card-cvc",onFocus:()=>y({...v,active:!0}),onBlur:()=>y({...v,active:!1}),onChange:e=>y({...v,value:e.target.value}),value:function(e){return e.replace(/[^0-9]/g,"")}(v.value),maxLength:4}),(0,l.jsx)("label",{htmlFor:"worldnetpayments-card-cvc",children:"Card code"})]}),!0===i.secureTokensEnabled&&(0,l.jsx)("div",{className:"wc-block-components-checkbox",children:(0,l.jsxs)("label",{htmlFor:"wc-blocks-worldnetpayments-new-payment-method",children:[(0,l.jsx)("input",{name:"wc-blocks-worldnetpayments-new-payment-method",id:"wc-blocks-worldnetpayments-new-payment-method",className:"wc-block-components-checkbox__input",type:"checkbox","aria-invalid":"false",onChange:e=>g(e.target.checked)}),(0,l.jsx)("svg",{className:"wc-block-components-checkbox__mark","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 20",children:(0,l.jsx)("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"})}),(0,l.jsx)("span",{className:"wc-block-components-checkbox__label",children:"Save to account"})]})}),!0===i.applepayData.enabled&&window.ApplePaySession&&ApplePaySession.canMakePayments()&&(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:"OR"}),(0,l.jsx)("div",{id:"worldnetpayments-apple-pay-button",className:"apple-pay-button apple-pay-button-black",style:{display:"inline-block",WebkitAppearance:"-apple-pay-button",ApplePayButtonType:"buy",ApplePayButtonStyle:"black"},onClick:()=>{return e={...i.applepayData,enabled:void 0,controller:void 0},t=new ApplePaySession(4,e),a=i.applepayData.controller,t.onvalidatemerchant=e=>{var n;e.validationURL,(n=e.validationURL,new Promise((function(e,t){var s=new XMLHttpRequest,r=a;return s.open("GET",r),s.onload=function(){return this.status>=200&&this.status<300?e(JSON.parse(s.response)):t({status:this.status,statusText:s.statusText})},s.onerror=function(){return t({status:this.status,statusText:s.statusText})},s.setRequestHeader("Content-Type","application/json"),s.send(JSON.stringify({validationURL:n}))}))).then((function(e){"object"!=typeof e&&(e=JSON.parse(e)),t.completeMerchantValidation(e)}))},t.oncancel=e=>{},t.onpaymentauthorized=e=>{const a=e.payment;var n=function(e){for(var t="",a=0;a<e.length;a++)t+=""+e.charCodeAt(a).toString(16);return t}(JSON.stringify(a));x("APPLEPAY"),b(n),t.completePayment(ApplePaySession.STATUS_SUCCESS),document.querySelector(".wc-block-components-checkout-place-order-button").dispatchEvent(new Event("click",{bubbles:!0,cancelable:!0}))},void t.begin();var e,t,a}})]}),(0,l.jsx)("div",{className:"clear"})]})]});var f},m=e=>{const{eventRegistration:t,emitResponse:a}=e,{onPaymentSetup:n}=t,[s,o]=(0,c.useState)({value:"",active:!1}),[p,u]=(0,c.useState)({value:"",active:!1}),[d,m]=(0,c.useState)({value:"",active:!1}),[v,y]=(0,c.useState)({value:"",active:!1});return(0,c.useEffect)((()=>{const e=n((async()=>({type:a.responseTypes.SUCCESS,meta:{paymentMethodData:{"card-name":s.value,"card-number":p.value,"card-expiry":d.value,cvc:v.value,"csrf-token":i.csrfToken}}})));return()=>{e()}}),[a.responseTypes.ERROR,a.responseTypes.SUCCESS,n,s.value,p.value,d.value,v.value]),(0,l.jsxs)(l.Fragment,{children:[(0,r.decodeEntities)(i.description||""),(0,l.jsx)("div",{className:"wc-payment-method-fields-worldnetpayments"})]})},v=e=>{const{PaymentMethodLabel:t}=e.components;return(0,l.jsx)(t,{text:u})},y={name:"worldnetpayments",label:(0,l.jsx)(v,{}),content:"xml"===i.integrationType?(0,l.jsx)(d,{}):(0,l.jsx)(m,{}),edit:"xml"===i.integrationType?(0,l.jsx)(d,{}):(0,l.jsx)(m,{}),canMakePayment:()=>!0,placeOrderButtonLabel:"hpp"===i.integrationType?(0,n.__)("Continue to payment","woocommerce-gateway-worldnetpayments"):void 0,ariaLabel:u,supports:{features:i.supports}};(0,s.registerPaymentMethod)(y)})();